{% extends 'base.html' %}
{% block content %}
<div class="card" style="max-width:560px;margin:24px auto;">
  <h2>Editar entrada</h2>
  <form method="post" action="{% url 'edit_password' entry.id %}" class="grid">
    {% csrf_token %}
    <div class="field">
      <label>Nombre del sitio</label>
      <input type="text" name="site_name" value="{{ entry.site_name }}" placeholder="Nombre del sitio">
    </div>
    <div class="field">
      <label>URL del sitio</label>
      <input type="url" name="site_url" value="{{ entry.site_url }}" placeholder="https://...">
    </div>
    <div class="field">
      <label>Usuario</label>
      <input type="text" name="username" value="{{ entry.username }}" placeholder="Usuario">
    </div>
    <div class="field">
      <label>Nueva contraseña (dejar en blanco para no cambiar)</label>
      <div style="display:flex; gap:8px;">
        <input id="edit-password" type="password" name="password" placeholder="Nueva contraseña" style="flex:1;">
        <button id="toggle-edit-pass" type="button" class="btn">Mostrar</button>
      </div>
      <div style="margin-top:8px; display:grid; gap:6px;">
        <meter id="edit-meter" min="0" max="5" low="2" high="4" optimum="5" value="0"></meter>
        <small id="edit-label" class="muted">Fortaleza: Muy débil</small>
      </div>
    </div>
    <div>
      <button type="submit" class="btn primary">Guardar cambios</button>
      <a class="btn" href="{% url 'dashboard' %}">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}

<script type="module">
import { attachPasswordStrengthMeter, attachPasswordToggle, preventDoubleSubmit } from '/static/js/app.js';
attachPasswordStrengthMeter('#edit-password', '#edit-meter', '#edit-label');
attachPasswordToggle('#toggle-edit-pass', '#edit-password');
preventDoubleSubmit('form');
</script>


